<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script src="jquery-3.1.1.min.js"></script>
<script src="jquery-ui.min.js"></script>
<script>

var potions = []

$(function(){

  $("td").click(function(){
    material = $(this).attr("id")
    $("#cauldron").append("<img class=\""+material+"\" src=\"img/"+material+".png\">")
  })

  $("#cauldron").click(function(){
    materials = jQuery.map($(this).children(),function(material,i){
      return $(material).attr("class")
    })
    material_size = materials.length
    materialbox = [0,0,0,0]
    jQuery.each(materials,function(i,mname){
      switch(mname){
        case 'mushroom'  : materialbox[0]+=1; break;
        case 'lizard'    : materialbox[1]+=1; break;
        case 'herbs'     : materialbox[2]+=1; break;
        case 'earthworm' : materialbox[3]+=1; break;
      }
    })
    if(material_size == 2 && materialbox[0] == 1 && materialbox[1] == 1){
      go_round_potion('red')
    } else if(material_size == 3 && materialbox[0] == 1 && materialbox[1] == 1 && materialbox[2] == 1){
      go_round_potion('green')
    } else if(material_size > 0) {
      go_round_potion('')
    }
    $("#cauldron").children().remove();
  })

  setInterval(function(){
    jQuery.each(potions,function(i){
      move_potion(i)
    })
  },160)

})

function move_potion(no){
  potions[no][1] += 2
  $("img#"+no).offset({left: potions[no][1] });
}

function go_round_potion(color){
  no = potions.length
  $("#belt").append("<img class=\"potion\" id=\""+no+"\" src=\"img/"+color+"potion.png\">")
  potions.push([color, 10])
}
</script>
<style>
.container{
  display: flex;
}
#cauldron{
  width:180px;
  border:solid;
}
#belt{
  height: 50px;
}
.potion{
  position: absolute;
}
td{
  width:80px;
  height:80px;
  border:solid;
  text-align: center;
}
</style>
</head>
<body>
<div class="container">
<div class="witch">
<img src="img/witch.png">
</div>
<div class="witch">
<img src="img/witch.png">
</div>
<div class="witch">
<img src="img/witch.png">
</div>
<div class="witch">
<img src="img/witch.png">
</div>
<div class="witch">
<img src="img/witch.png">
</div>
<div class="witch">
<img src="img/witch.png">
</div>
</div>
<div id="belt">
</div>
<div class="container">
<table>
  <tr>
    <td id="mushroom"><img src="img/mushroom.png"></td>
    <td id="herbs"><img src="img/herbs.png"></td>
  </tr>
  <tr>
    <td id="earthworm"><img src="img/earthworm.png"></td>
    <td id="lizard"><img src="img/lizard.png"></td>
  </tr>
</table>
<div id="cauldron">

</div>
</div>
</body>
</html>